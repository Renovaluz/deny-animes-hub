<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Akatsuki Apex | Central de Mídia Definitiva</title>

<!-- Google Fonts: Poppins -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<!-- Estilos Principais -->
<style>
    /*
    ================================================================
    DESIGN SYSTEM V7: "AKATSUKI APEX"
    - Reconstrução total com foco em design sofisticado, UX premium e robustez.
    - Paleta Akatsuki refinada, animações fluidas e layout responsivo de elite.
    ================================================================
    */

    :root {
        /* MODO ESCURO (PADRÃO) */
        --font-family-main: 'Poppins', sans-serif;
        --color-primary: #E50914; /* Vermelho Akatsuki */
        --color-primary-hover: #F40612;
        
        --color-background: #0D0D0D;
        --color-surface: #1A1A1A;
        --color-surface-light: #242424;
        --color-border: rgba(255, 255, 255, 0.1);
        --color-skeleton: #2a2a2e;
        
        --color-text-primary: #F0F2F5;
        --color-text-secondary: #9BA2AE;
        --color-text-heading: #FFFFFF;

        --shadow-medium: 0 10px 20px rgba(0, 0, 0, 0.3);
        --modal-backdrop-color: rgba(13, 13, 13, 0.6);
    }

    body.light-mode {
        /* MODO CLARO */
        --color-primary: #D90429;
        --color-primary-hover: #B90022;

        --color-background: #F4F6F8;
        --color-surface: #FFFFFF;
        --color-surface-light: #F1F3F5;
        --color-border: #E9ECEF;
        --color-skeleton: #e2e8f0;

        --color-text-primary: #343A40;
        --color-text-secondary: #6C757D;
        --color-text-heading: #121212;

        --shadow-medium: 0 8px 16px rgba(0, 0, 0, 0.1);
        --modal-backdrop-color: rgba(244, 246, 248, 0.4);
    }
    
    /* RESET E CONFIGURAÇÕES GLOBAIS */
    *, *::before, *::after { box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    
    body {
        font-family: var(--font-family-main);
        background-color: var(--color-background);
        color: var(--color-text-primary);
        margin: 0;
        padding-top: 70px;
        transition: background-color 0.4s ease, color 0.4s ease;
    }
    body.modal-open { overflow: hidden; }

    .container { width: 100%; max-width: 1440px; margin: 0 auto; padding: 0 30px; }

    /* HEADER */
    .main-header {
        position: fixed; top: 0; left: 0; width: 100%; height: 70px;
        background-color: rgba(13, 13, 13, 0.7);
        backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
        border-bottom: 1px solid var(--color-border);
        z-index: 900;
        transition: background-color 0.4s ease, border-color 0.4s ease;
    }
    body.light-mode .main-header { background-color: rgba(255, 255, 255, 0.7); }
    
    .main-header .container { display: flex; align-items: center; justify-content: space-between; height: 100%; }
    
    .header-logo {
        font-size: 1.7rem; font-weight: 800;
        color: var(--color-text-heading); text-decoration: none; letter-spacing: -1px;
    }
    .header-logo .fa-cloud { color: var(--color-primary); }
    
    #theme-toggle-btn {
        background: var(--color-surface); color: var(--color-text-secondary);
        border: 1px solid var(--color-border);
        width: 44px; height: 44px; border-radius: 50%;
        cursor: pointer; font-size: 1.3rem;
        display: flex; align-items: center; justify-content: center;
        transition: all 0.4s ease;
    }
    #theme-toggle-btn:hover { color: var(--color-primary); }
    .theme-icon.fa-sun { display: none; }
    body.light-mode .theme-icon.fa-sun { display: block; }
    body.light-mode .theme-icon.fa-moon { display: none; }

    /* LAYOUT PRINCIPAL */
    .main-layout {
        display: grid; grid-template-columns: 1fr;
        gap: 50px; padding: 50px 0;
    }
    @media (min-width: 1024px) { .main-layout { grid-template-columns: 1fr 360px; } }

    .main-content-area > section:not(:last-child) { margin-bottom: 60px; }
    .section-title {
        font-size: 2rem; font-weight: 700; color: var(--color-text-heading);
        margin: 0 0 30px 0; padding-bottom: 15px;
        border-bottom: 1px solid var(--color-border);
        display: flex; align-items: center; gap: 15px;
    }
    .section-title i { color: var(--color-primary); }

    /* GRID DE NOTÍCIAS 2X2 EM MOBILE */
    .news-grid {
        display: grid; grid-template-columns: 1fr;
        gap: 30px;
    }
    @media (min-width: 540px) { .news-grid { grid-template-columns: repeat(2, 1fr); } }
    @media (min-width: 1200px) { .news-grid { grid-template-columns: repeat(3, 1fr); } }

    .news-card {
        background-color: var(--color-surface);
        border: 1px solid var(--color-border);
        border-radius: 12px;
        text-decoration: none; color: inherit; overflow: hidden;
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        display: flex; flex-direction: column;
        transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
    }
    .news-card:hover { transform: translateY(-8px); box-shadow: var(--shadow-medium); border-color: var(--color-primary); }

    .news-card__image-container {
        position: relative; aspect-ratio: 16 / 9; overflow: hidden;
        border-bottom: 1px solid var(--color-border);
    }
    .news-card__image { width: 100%; height: 100%; object-fit: cover; transition: transform 0.4s ease; }
    .news-card:hover .news-card__image { transform: scale(1.05); }

    .news-card__category {
        position: absolute; top: 15px; left: 15px;
        font-size: 0.75rem; font-weight: 700;
        color: #fff; background-color: var(--color-primary);
        padding: 4px 10px; border-radius: 6px;
        text-transform: uppercase; letter-spacing: 0.5px;
    }

    .news-card__content { padding: 25px; flex-grow: 1; display: flex; flex-direction: column; }
    .news-card__title {
        font-size: 1.25rem; font-weight: 600; color: var(--color-text-heading);
        line-height: 1.4; margin: 0; flex-grow: 1;
    }
    .news-card__meta {
        font-size: 0.85rem; color: var(--color-text-secondary);
        margin-top: 20px; padding-top: 15px;
        border-top: 1px solid var(--color-border);
    }
    .news-card__meta span:not(:last-child) { margin-right: 20px; }
    .news-card__meta i { margin-right: 8px; }

    /* SIDEBAR */
    .sidebar { position: relative; }
    .sidebar-inner { position: sticky; top: 90px; }
    .sidebar-widget-container { display: flex; flex-direction: column; gap: 30px; }
    .sidebar-widget {
        background-color: var(--color-surface);
        border: 1px solid var(--color-border);
        border-radius: 12px; padding: 25px;
        max-height: calc(50vh - 80px); /* Garante que cada widget tenha um limite */
        overflow-y: auto;
    }
    
    .ranking-list { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 20px; }
    .ranking-item { display: flex; gap: 15px; align-items: center; }
    .ranking-item__rank { font-size: 1.2rem; font-weight: 700; color: var(--color-text-secondary); width: 25px; text-align: center; }
    .ranking-item__img { width: 50px; height: 75px; object-fit: cover; border-radius: 6px; flex-shrink: 0; }
    .ranking-item__title { font-weight: 600; color: var(--color-text-primary); line-height: 1.4; }
    
    /* MODAL */
    .modal {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background-color: var(--modal-backdrop-color);
        backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
        display: flex; align-items: center; justify-content: center;
        opacity: 0; visibility: hidden;
        transition: opacity 0.4s ease, visibility 0s 0.4s;
        z-index: 1000; padding: 20px;
    }
    .modal.is-active { opacity: 1; visibility: visible; transition-delay: 0s; }
    
    .modal__content {
        background-color: transparent; border-radius: 16px;
        width: 100%; max-width: 1200px;
        height: 90vh; max-height: 900px;
        transform: scale(0.95); opacity: 0;
        transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.4s ease;
        position: relative; display: flex;
    }
    .modal.is-active .modal__content { transform: scale(1); opacity: 1; }

    .modal-background {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        object-fit: cover; z-index: 1; border-radius: inherit;
    }
    .modal-overlay {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background: linear-gradient(to top, var(--color-background) 20%, rgba(13, 13, 13, 0.8) 100%);
        z-index: 2; border-radius: inherit;
    }
    
    .modal__close {
        position: absolute; top: 20px; right: 20px;
        background: rgba(0,0,0,0.4); border: none;
        border-radius: 50%; width: 44px; height: 44px;
        font-size: 1.2rem; color: #fff; cursor: pointer;
        transition: all 0.3s ease;
        display: flex; align-items: center; justify-content: center;
        z-index: 4;
    }
    .modal__close:hover { background: var(--color-primary); transform: scale(1.1) rotate(90deg); }

    .modal-inner-wrapper { position: relative; z-index: 3; width: 100%; height: 100%; overflow-y: auto; padding: 50px; }
    
    .modal-grid-layout { display: grid; grid-template-columns: 1fr; gap: 40px; }
    @media(min-width: 992px) { .modal-grid-layout { grid-template-columns: 1fr 320px; } }
    
    .modal-main-col__title {
        font-size: 2.8rem; font-weight: 800; color: var(--color-text-heading);
        line-height: 1.2; text-shadow: 0 3px 15px rgba(0,0,0,0.6);
        margin: 0 0 30px 0;
    }

    .video-player-container, .article-body-container { margin-bottom: 40px; }
    .video-player-container {
        position: relative; width: 100%; padding-bottom: 56.25%; height: 0;
        border-radius: 12px; overflow: hidden;
        background-color: #000; box-shadow: var(--shadow-large);
    }
    .video-player-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }
    
    .article-body-container {
        font-size: 1.1rem; line-height: 1.9; color: var(--color-text-primary);
        background: rgba(0,0,0,0.2); backdrop-filter: blur(5px);
        padding: 30px; border-radius: 12px;
    }
    
    .modal-sidebar-col { background: rgba(0,0,0,0.2); backdrop-filter: blur(5px); padding: 25px; border-radius: 12px; border: 1px solid var(--color-border); }
    .metadata-item { margin-bottom: 20px; }
    .metadata-item__label { font-size: 0.8rem; font-weight: 600; text-transform: uppercase; color: var(--color-text-secondary); letter-spacing: 0.5px; }
    .metadata-item__value { font-size: 1rem; color: var(--color-text-primary); margin-top: 5px; }
    
    .comments-section-title { font-size: 1.5rem; margin: 0 0 20px 0; border-bottom: 1px solid var(--color-border); padding-bottom: 10px; }
    .comment-form textarea { width: 100%; min-height: 100px; padding: 15px; border: 1px solid var(--color-border); border-radius: 8px; background-color: var(--color-surface-light); color: var(--color-text-primary); font-family: inherit; font-size: 1rem; resize: vertical; transition: all 0.3s ease; }
    .comment-form textarea:focus { border-color: var(--color-primary); box-shadow: 0 0 0 3px rgba(229, 9, 20, 0.2); outline: none; }
    .btn-submit { background-color: var(--color-primary); border: none; padding: 10px 20px; border-radius: 6px; color: #fff; cursor: pointer; transition: background-color 0.2s; }
    .btn-submit:hover { background-color: var(--color-primary-hover); }

    .comments-list { display: flex; flex-direction: column; gap: 25px; margin-top: 30px; }
    .comment-card { display: flex; gap: 15px; }
    .comment-card__avatar { width: 44px; height: 44px; border-radius: 50%; object-fit: cover; }
    .comment-card__author { font-weight: 600; }
    .comment-card__date { font-size: 0.8rem; color: var(--color-text-secondary); margin-left: 10px; }
    .comment-card__text { margin-top: 5px; line-height: 1.6; color: var(--color-text-secondary); }

    /* Esqueletos de Carregamento */
    @keyframes skeleton-loading { 0% { background-color: var(--color-skeleton); } 50% { background-color: var(--color-surface-light); } 100% { background-color: var(--color-skeleton); } }
    .skeleton { animation: skeleton-loading 1.5s infinite ease-in-out; border-radius: 6px; }
    .skeleton-text { height: 1em; margin-bottom: 0.5em; }
    .skeleton-card { background-color: transparent; }
    .skeleton-card .news-card__image-container { background-color: var(--color-skeleton); animation: skeleton-loading 1.5s infinite ease-in-out; }
    .skeleton-card .news-card__content { background-color: transparent; }
    .skeleton-ranking-item { display: flex; gap: 15px; align-items: center; }
    .skeleton-ranking-item .skeleton-rank { width: 25px; height: 25px; }
    .skeleton-ranking-item .skeleton-img { width: 50px; height: 75px; }
    .skeleton-ranking-item .skeleton-info { flex-grow: 1; }

    /* UTILITÁRIOS */
    .status-message { padding: 40px 20px; text-align: center; color: var(--color-text-secondary); font-size: 1.1rem; }
    .scrollbar-styled::-webkit-scrollbar { width: 8px; }
    .scrollbar-styled::-webkit-scrollbar-track { background: transparent; }
    .scrollbar-styled::-webkit-scrollbar-thumb { background-color: var(--color-primary); border-radius: 4px; }

    /* FOOTER */
    .main-footer { background-color: var(--color-background); padding: 30px 0; text-align: center; color: var(--color-text-secondary); font-size: 0.9rem; border-top: 1px solid var(--color-border); }

</style>
</head>
<body>

<header class="main-header">
    <div class="container">
        <a href="#" class="header-logo"><i class="fas fa-cloud"></i> AKATSUKI APEX</a>
        <button id="theme-toggle-btn" aria-label="Alternar tema">
            <i class="fas fa-moon theme-icon"></i><i class="fas fa-sun theme-icon"></i>
        </button>
    </div>
</header>

<main class="container main-layout">
    <div class="main-content-area">
        <section id="admin-news-section">
            <h2 class="section-title"><i class="fas fa-user-edit"></i> Do Editor</h2>
            <div class="news-grid" id="admin-news-grid"></div>
        </section>
        <section id="api-news-section">
            <h2 class="section-title"><i class="fas fa-video"></i> Destaques da Web</h2>
            <div class="news-grid" id="api-news-grid"></div>
        </section>
    </div>
    <aside class="sidebar">
        <div class="sidebar-inner">
            <div class="sidebar-widget-container">
                <div class="sidebar-widget scrollbar-styled">
                    <h3 class="section-title"><i class="fas fa-fire-alt"></i> Top Animes</h3>
                    <ol class="ranking-list" id="top-anime-list"></ol>
                </div>
                <div class="sidebar-widget scrollbar-styled">
                    <h3 class="section-title"><i class="fas fa-film"></i> Top Filmes</h3>
                    <ol class="ranking-list" id="top-movies-list"></ol>
                </div>
            </div>
        </div>
    </aside>
</main>

<div id="content-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal__content">
        <img id="modal-backdrop" src="" alt="Fundo dinâmico" class="modal-background">
        <div class="modal-overlay"></div>
        <button class="modal__close" aria-label="Fechar modal">×</button>
        <div class="modal-inner-wrapper scrollbar-styled">
            <div class="modal-grid-layout">
                <main class="modal-main-col" id="modal-main-column"></main>
                <aside class="modal-sidebar-col" id="modal-sidebar-column"></aside>
            </div>
        </div>
    </div>
</div>

<footer class="main-footer"><p>© 2025 Akatsuki Apex. Todos os direitos reservados.</p></footer>

<script>
/**
 * @file Script principal para o Akatsuki Apex v7.
 * @description Versão definitiva com design premium, arquitetura robusta e
 * funcionalidades completas conforme solicitado.
 * @version 7.0.0
 */
const App = {
    config: {
        JIKAN_API: 'https://api.jikan.moe/v4',
        TMDB_API: 'https://api.themoviedb.org/3',
        TMDB_KEY: 'ebc6c62b1d31f28ab2d155ad4c921657',
        TMDB_IMG_PATH: 'https://image.tmdb.org/t/p/',
        PLACEHOLDER_IMG: 'https://via.placeholder.com/500x281/1A1A1A/A0A0A0?text=Indisponível',
    },
    state: { currentContentId: null },
    adminPosts: [
        { id: 'article_1', type: 'article', category: 'Análise', title: 'A Relevância Contínua de Cowboy Bebop', author: 'Apex Editor', date: '2025-07-15', image: 'https://images.alphacoders.com/605/605592.png', excerpt: 'Explorando como a mistura de gêneros, personagens profundos e trilha sonora icônica mantém a obra-prima de Shinichirō Watanabe atemporal.', content: `<p>Vinte e sete anos após sua estreia, Cowboy Bebop transcende a nostalgia para se afirmar como uma das obras mais influentes e artisticamente completas da história da animação. Sua genialidade não reside em um único elemento, mas na fusão quase perfeita de faroeste espacial, filme noir, comédia e um jazz melancólico que dá alma à jornada de sua tripulação.</p><p>Cada episódio é uma vinheta, uma história contida que explora temas de existencialismo, solidão e a impossibilidade de escapar do passado. Spike, Jet, Faye e Ed não são heróis; são sobreviventes, cada um carregando um fardo que define suas ações. É essa humanidade falha, essa busca por algo indefinido enquanto se lida com as contas do ontem, que cria uma conexão tão duradoura com o público. A série nos ensina que, às vezes, o importante não é encontrar um final feliz, mas sim viver o momento, mesmo que seja apenas até a próxima caçada. See you, Space Cowboy...</p>`},
        { id: 'article_2', type: 'article', category: 'Tecnologia', title: 'O Futuro da Animação: IA e a Criatividade Humana', author: 'Apex Editor', date: '2025-07-14', image: 'https://images2.alphacoders.com/133/1335359.png', excerpt: 'A inteligência artificial generativa está remodelando indústrias. Como a animação pode se beneficiar sem perder sua alma artística?', content: `<p>A ascensão das ferramentas de inteligência artificial generativa de imagem e vídeo provocou um debate acalorado na comunidade artística. Para a indústria da animação, tradicionalmente intensiva em mão de obra, a promessa de otimização é tentadora. A IA pode acelerar processos como a criação de cenários, a interpolação de quadros (in-betweening) e até mesmo a geração de storyboards iniciais.</p><p>No entanto, a preocupação é legítima: onde fica a mão do artista? A beleza da animação muitas vezes reside nas imperfeições deliberadas, no estilo único de um diretor ou de um estúdio. O desafio para o futuro não será substituir os artistas, mas sim criar um pipeline onde a IA atue como uma ferramenta poderosa sob o controle criativo humano. Imagine animadores focando mais na performance dos personagens e na direção de arte, enquanto a IA cuida das tarefas repetitivas. Se bem implementado, este pode ser um salto quântico em produtividade, permitindo que estúdios menores compitam com grandes produções e que novas formas de expressão visual surjam.</p>`}
    ],

    init() {
        this.cacheDOMElements();
        this.ThemeManager.init();
        this.setupEventListeners();
        this.loadInitialContent();
    },

    cacheDOMElements() {
        this.dom = {
            body: document.body,
            adminNewsGrid: document.getElementById('admin-news-grid'),
            apiNewsGrid: document.getElementById('api-news-grid'),
            topAnimeList: document.getElementById('top-anime-list'),
            topMovieList: document.getElementById('top-movies-list'),
            modal: document.getElementById('content-modal'),
            modalBackdrop: document.getElementById('modal-backdrop'),
            modalMainColumn: document.getElementById('modal-main-column'),
            modalSidebarColumn: document.getElementById('modal-sidebar-column'),
            themeToggleButton: document.getElementById('theme-toggle-btn'),
        };
    },

    setupEventListeners() {
        this.dom.themeToggleButton.addEventListener('click', () => this.ThemeManager.toggle());
        document.querySelector('.main-content-area').addEventListener('click', e => this.handleCardClick(e));
        this.dom.modal.querySelector('.modal__close').addEventListener('click', () => this.ModalManager.close());
        this.dom.modal.addEventListener('click', e => { if (e.target === this.dom.modal) this.ModalManager.close(); });
        document.addEventListener('keydown', e => { if (e.key === 'Escape' && this.dom.modal.classList.contains('is-active')) this.ModalManager.close(); });
    },

    async loadInitialContent() {
        this.render.setLoadingState(this.dom.adminNewsGrid, 'card', 2);
        this.render.setLoadingState(this.dom.apiNewsGrid, 'card', 4);
        this.render.setLoadingState(this.dom.topAnimeList, 'ranking', 5);
        this.render.setLoadingState(this.dom.topMovieList, 'ranking', 5);

        this.render.newsGrid(this.adminPosts, this.dom.adminNewsGrid);

        const [newsData, animes, movies] = await Promise.all([
            this.Api.getJikanPromos(),
            this.Api.getJikanTopAiring(),
            this.Api.getTmdbPopularMovies()
        ]);
        
        if (newsData) this.render.newsGrid(newsData.slice(0, 4), this.dom.apiNewsGrid); else this.dom.apiNewsGrid.innerHTML = this.render.getMessageHTML('Não foi possível carregar os destaques.');
        if (animes) this.render.sidebarList(this.dom.topAnimeList, animes, 'anime'); else this.dom.topAnimeList.innerHTML = this.render.getMessageHTML('Erro ao carregar.');
        if (movies) this.render.sidebarList(this.dom.topMovieList, movies, 'movie'); else this.dom.topMovieList.innerHTML = this.render.getMessageHTML('Erro ao carregar.');
    },

    handleCardClick(event) {
        const card = event.target.closest('.news-card');
        if (!card) return;
        event.preventDefault();
        const data = { ...card.dataset };
        this.state.currentContentId = data.id;
        this.ModalManager.open(data);
    },

    Api: {
        async fetch(url) { try { const r = await fetch(url); if (!r.ok) throw new Error(`${r.status}`); return await r.json(); } catch (e) { console.error(`Falha: ${url}`, e); return null; } },
        async getJikanPromos() { return (await this.fetch(App.config.JIKAN_API + '/watch/promos'))?.data; },
        async getJikanTopAiring() { return (await this.fetch(App.config.JIKAN_API + '/top/anime?filter=airing&limit=5'))?.data; },
        async getTmdbPopularMovies() { return (await this.fetch(`${App.config.TMDB_API}/movie/popular?api_key=${App.config.TMDB_KEY}&language=pt-BR&page=1`))?.results; },
    },

    ModalManager: {
        open(data) {
            App.dom.body.classList.add('modal-open');
            App.dom.modal.classList.add('is-active');
            
            App.dom.modalBackdrop.src = data.image || '';
            
            if (data.type === 'video') {
                const videoId = data.id.split('_')[1];
                this.renderContent(data.title, App.render.getVideoPlayerHTML(videoId), App.render.getVideoMetadataHTML(data));
            } else if (data.type === 'article') {
                const articleData = App.adminPosts.find(p => p.id === data.id);
                this.renderContent(articleData.title, App.render.getArticleBodyHTML(articleData.content), App.render.getArticleMetadataHTML(articleData));
            }
        },
        close() { App.dom.body.classList.remove('modal-open'); App.dom.modal.classList.remove('is-active'); },
        renderContent(title, primaryHTML, sidebarHTML) {
            App.dom.modalMainColumn.innerHTML = `<h2 class="modal-main-col__title">${title}</h2>${primaryHTML}`;
            App.dom.modalSidebarColumn.innerHTML = sidebarHTML;
        }
    },

    ThemeManager: {
        init() { if (localStorage.getItem('theme') === 'light') App.dom.body.classList.add('light-mode'); this.updateIcons(); },
        toggle() { App.dom.body.classList.toggle('light-mode'); localStorage.setItem('theme', App.dom.body.classList.contains('light-mode') ? 'light' : 'dark'); this.updateIcons(); },
        updateIcons() {
            const isLight = App.dom.body.classList.contains('light-mode');
            App.dom.themeToggleButton.querySelector('.fa-moon').style.display = isLight ? 'none' : 'block';
            App.dom.themeToggleButton.querySelector('.fa-sun').style.display = isLight ? 'block' : 'none';
        }
    },
    
    render: {
        setLoadingState(container, type, count = 1) {
            let skeletonHTML = '';
            for (let i = 0; i < count; i++) {
                if (type === 'card') skeletonHTML += this.getSkeletonCardHTML();
                if (type === 'ranking') skeletonHTML += this.getSkeletonRankingHTML();
            }
            container.innerHTML = skeletonHTML;
        },
        getMessageHTML(text) { return `<p class="status-message">${text}</p>`; },
        getSkeletonCardHTML: () => `<div class="news-card skeleton-card"><div class="news-card__image-container"></div><div class="news-card__content"><div class="skeleton skeleton-text" style="width: 40%;"></div><div class="skeleton skeleton-text" style="width: 90%;"></div><div class="skeleton skeleton-text" style="width: 70%;"></div></div></div>`,
        getSkeletonRankingHTML: () => `<li class="skeleton-ranking-item"><div class="skeleton skeleton-rank"></div><div class="skeleton skeleton-img"></div><div class="skeleton-info"><div class="skeleton skeleton-text"></div><div class="skeleton skeleton-text" style="width: 50%;"></div></div></li>`,
        
        newsGrid(items, container) {
            container.innerHTML = items.map(item => {
                const isApi = !!item.entry;
                const data = isApi ? item.entry : item;
                const videoId = isApi ? (item.trailer.url.split('v=')[1] || item.trailer.url.split('/').pop()) : null;
                const id = isApi ? `video_${videoId}` : data.id;
                const type = isApi ? 'video' : 'article';
                const image = isApi ? data.images?.jpg?.large_image_url : data.image;
                
                return `
                    <a href="#" class="news-card" data-id="${id}" data-type="${type}" data-title="${data.title}" data-image="${image || App.config.PLACEHOLDER_IMG}" data-author="${data.author || 'Jikan API'}" data-date="${data.date || new Date().toISOString()}" data-category="${data.category || 'Vídeo'}">
                        <div class="news-card__image-container">
                            <img src="${image || App.config.PLACEHOLDER_IMG}" class="news-card__image" alt="${data.title}" onerror="this.src='${App.config.PLACEHOLDER_IMG}';">
                            <span class="news-card__category">[ ${isApi ? 'VÍDEO' : 'ARTIGO'} ]</span>
                        </div>
                        <div class="news-card__content">
                            <h3 class="news-card__title">${data.title}</h3>
                            ${!isApi ? `<p class="news-card__excerpt">${data.excerpt}</p>` : ''}
                            <div class="news-card__meta">${!isApi ? `<span><i class="fas fa-user-edit"></i> ${data.author}</span><span><i class="fas fa-calendar-alt"></i> ${new Date(data.date).toLocaleDateString('pt-BR')}</span>` : '<span><i class="fas fa-play-circle"></i> Abrir Destaque</span>'}</div>
                        </div>
                    </a>`;
            }).join('');
        },

        sidebarList(container, items, type) {
            container.innerHTML = items.map((item, index) => {
                const isAnime = type === 'anime';
                const title = isAnime ? (item.title_english || item.title) : item.title;
                const image = isAnime ? item.images?.jpg?.image_url : `${App.config.TMDB_IMG_PATH}w185${item.poster_path}`;
                return `
                 <li class="ranking-item">
                    <span class="ranking-item__rank">${index + 1}</span>
                    <img src="${image || App.config.PLACEHOLDER_IMG}" class="ranking-item__img" alt="${title}">
                    <div class="ranking-item__info"><span class="ranking-item__title">${title}</span></div>
                 </li>`;
            }).join('');
        },

        getVideoPlayerHTML(videoId) { return `<div class="video-player-container"><iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&modestbranding=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>`; },
        getArticleBodyHTML(content) { return `<div class="article-body-container">${content}</div>`; },
        getVideoMetadataHTML: (d) => `<div class="metadata-item"><span class="metadata-item__label">Categoria</span><span class="metadata-item__value">${d.category}</span></div><div class="metadata-item"><span class="metadata-item__label">Fonte</span><span class="metadata-item__value">${d.author}</span></div>`,
        getArticleMetadataHTML: (d) => `<div class="metadata-item"><span class="metadata-item__label">Categoria</span><span class="metadata-item__value">${d.category}</span></div><div class="metadata-item"><span class="metadata-item__label">Autor</span><span class="metadata-item__value">${d.author}</span></div><div class="metadata-item"><span class="metadata-item__label">Publicado em</span><span class="metadata-item__value">${new Date(d.date).toLocaleDateString('pt-BR')}</span></div>`,
    },
};

document.addEventListener('DOMContentLoaded', () => App.init());
</script>
</body>
</html>