<%- include('partials/header', { page_name: 'anime-detail' }) %>

<div class="anime-detail-section container animated-section fade-in-up">
    <div class="anime-detail__grid">
        <aside class="anime-detail__sidebar">
            <div class="anime-detail__poster"><img src="<%= anime.imagemCapa %>" alt="Pôster de <%= anime.titulo %>"></div>
            <div class="anime-detail__info-block">
                <h4><i class="fas fa-info-circle"></i> Informações</h4>
                <p><strong><i class="fas fa-star"></i> Nota:</strong> <%= anime.classificacao || 'N/A' %></p>
                <p><strong><i class="fas fa-theater-masks"></i> Gêneros:</strong> <%= anime.generos.join(', ') %></p>
                <p><strong><i class="fas fa-calendar-alt"></i> Ano:</strong> <%= anime.anoLancamento %></p>
            </div>
             <a href="/assistir/<%= anime.id %>/<%= anime.episodios.length > 0 ? anime.episodios[0].numero : '' %>" class="btn btn--primary"><i class="fas fa-play-circle"></i> Assistir Agora</a>
        </aside>
        <main class="anime-detail__content">
            <h1><%= anime.titulo %></h1>
            <h4><i class="fas fa-book-open"></i> Sinopse</h4>
            <p><%= anime.sinopse %></p>
            <% if(anime.episodios && anime.episodios.length > 0) { %>
                <h4 id="episode-list-title"><i class="fas fa-list-ol"></i> Lista de Episódios</h4>
                <ul class="episode-list">
                    <% anime.episodios.forEach(ep => { %>
                        <li><a href="/assistir/<%= anime.id %>/<%= ep.numero %>"><span>Episódio <%= ep.numero %> - <%= ep.titulo %></span><i class="fas fa-play-circle"></i></a></li>
                    <% }) %>
                </ul>
            <% } else { %>
                <h4><i class="fas fa-clock"></i> Episódios</h4>
                <p>Nenhum episódio cadastrado para este anime ainda.</p>
            <% } %>
        </main>
    </div>
</div>

<%- include('partials/footer') %>